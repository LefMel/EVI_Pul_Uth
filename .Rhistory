n.chains=2)
hist(log(corr_data$`RID.(g/L)`))
hist(log(corr_data$`IR.(g/L)`))
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length((corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
alpha=c(1,1)),
n.chains=2)
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length((corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
alpha=c(1,1)),
n.chains=2)
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
alpha=c(1,1)),
n.chains=2)
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
alpha=c(1,1)),
n.chains=2)
results_add_col_corr <- add.summary(results_col_corr)
View(summary(results_add_col_DF))
View(summary(results_add_col_corr))
getwd()
write.csv(summary(results_add_col_corr), "results_col_corr.csv")
results <- run.jags("stick_break",
monitor=c("Cluster", "p", "theta1", "delta1"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`), C=10),
n.chains=4)
View(summary(results))
plot(summary(results))
plot(summary(results))
plot(results)
results <- run.jags("stick_break",
monitor=c("Cluster", "p", "theta1", "delta1"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`), C=10),
n.chains=4)
curve(dgamma(x,3.37, 5.28))
results <- run.jags("stick_break",
monitor=c("Cluster", "p", "theta1", "delta1"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`), C=10),
n.chains=4)
results <- run.jags("stick_break",
monitor=c("Cluster", "p", "theta1", "delta1"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`), C=10),
n.chains=4)
View(summary(results))
plot(results)
summary(log(corr_data$`Dig_Ref.(%Brix)`))
(3.7 - 2.1)/518
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`)
Z=log(corr_data$`Dig_Ref.(%Brix)`),
alpha=c(1,1)),
n.chains=2)
results_col_corr = run.jags("corr_model",
monitor = c("se1", "sp1","se2", "sp2", "Y", "P", "lambda1", "gamma1", "lambda2", "gamma2", "rho", "AUC1", "AUC2", "diff"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
Z=log(corr_data$`Dig_Ref.(%Brix)`),
alpha=c(1,1)),
n.chains=2)
results_col_corr = run.jags("corr_model",
monitor = c("P", "lambda1", "gamma1", "lambda2", "gamma2", "lambda3", "gamma3", "rho", "AUC1", "AUC2", "AUC3"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
Z=log(corr_data$`Dig_Ref.(%Brix)`),
alpha=c(1,1)),
n.chains=2)
View(summary(results_col_corr))
plot(results_col_corr)
results_col_corr = run.jags("corr_model",
monitor = c("P", "lambda1", "gamma1", "lambda2", "gamma2", "lambda3", "gamma3", "rho", "AUC1", "AUC2", "AUC3"),
data=list(N=length(corr_data$ID),
X=log(corr_data$`RID.(g/L)`),
Y=log(corr_data$`IR.(g/L)`),
Z=log(corr_data$`Dig_Ref.(%Brix)`),
alpha=c(1,1)),
n.chains=3)
View(summary(results_col_corr))
plot(results_col_corr)
write.csv(summary(results_add_col_corr), "results_col_corr.csv")
summary(results_col_corr)
summary(calf_data$`IR.(mg/dL)`)
View(calf_data)
corr_data_calf =calf_data[calf_data$`IR.(mg/dL)`>0,]
corr_data_calf = na.omit(corr_data_calf)
# 677 obs
summary(log(corr_data_calf$`RID.(mg/dL)`))
summary(log(corr_data_calf$`IR.(mg/dL)`))
summary(log(corr_data_calf$`Digital.Refractometer.(%Brix)`)
)
summary(log(corr_data_calf$`Optical.Refractometer.(g/dL)`))
results_col_corr_calf = run.jags("corr_model_calf",
monitor = c("P", "lambda1", "gamma1", "lambda2", "gamma2", "lambda3", "gamma3", "lambda4", "gamma4", "rho1", "rho2", "AUC1", "AUC2", "AUC3", "AUC4"),
data=list(N=length(corr_data$ID),
X=log(corr_data_calf$`RID.(mg/dL)`),
Y=log(corr_data_calf$`IR.(mg/dL)`),
Z=log(corr_data_calf$`Digital.Refractometer.(%Brix)`),
W=log(corr_data_calf$`Optical.Refractometer.(g/dL)`),
alpha=c(1,1)),
n.chains=3)
View(summary(results_col_corr_calf))
plot(results_col_corr)
plot(results_col_corr_calf)
#Y[324] - max
exp(1.281+0.0081*324) - 49.66994
getwd()
setwd("C:/Users/LefMel/Documents/EVI Uth")
list.files()
library(openxlsx)
## function for runif
miss_uni = function(x,a,b){
if(is.na(b))b=a
if (a > b){
y = floor((runif(x,b,a)))
}
else{
y = floor(runif(x,a,b))
}
return (y)
}
draft = read.xlsx("Dataset Cases UTH_Official.xlsx", detectDates = TRUE)
View(draft)
data = draft[1:187,]
View(data)
str(data)
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = miss_uni(1, a = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i-1]), b = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
data[4,]$X3 =  as.numeric(data$Respiratory.Infections[4])
data[i,]$X3 =  as.numeric(data$X3[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$X5 =  as.numeric(data$Pneumonia[4])
data[i,]$X5 =  as.numeric(data$X5[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$X10 =  as.numeric(data$Pneumonia[4])
data[i,]$X10 =  as.numeric(data$X10[i-1]) + as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = miss_uni(1, a = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i-1]), b = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
data[4,]$X3 =  as.numeric(data$Respiratory.Infections[4])
data[i,]$X3 =  as.numeric(data$X3[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$X5 =  as.numeric(data$Pneumonia[4])
data[i,]$X5 =  as.numeric(data$X5[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$X10 =  as.numeric(data$Pneumonia[4])
data[i,]$X10 =  as.numeric(data$X10[i-1]) + as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
View(data)
EVI = data[4:187,]
deviant(as.numeric(EVI$Respiratory.Infections))
library(EVI)
deviant(as.numeric(EVI$Respiratory.Infections))
EVI::evi.graphs(EVI_output, ln=F)
# Respiratory infections
deviant(as.numeric(EVI$Respiratory.Infections), r_a = 14)
EVI::evi.graphs(EVI_output, ln=F)
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = miss_uni(1, a = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i-1]), b = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
data[4,]$X3 =  as.numeric(data$Respiratory.Infections[4])
data[i,]$X3 =  as.numeric(data$X3[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$X5 =  as.numeric(data$Pneumonia[4])
data[i,]$X5 =  as.numeric(data$X5[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$X10 =  as.numeric(data$Pneumonia[4])
data[i,]$X10 =  as.numeric(data$X10[i-1]) + as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
View(data)
data[4,]
data[2,]
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = miss_uni(1, a = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i-1]), b = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$`Total.(Respiratory.inf.+.Pneumonia)` = as.numeric(data$`Total.(Respiratory.inf.+.Pneumonia)`[i])
}
data[4,]$X3 =  as.numeric(data$Respiratory.Infections[4])
}
str(data)
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$Total = miss_uni(1, a = as.numeric(data$Total[i-1]), b = as.numeric(data$Total[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$Total = as.numeric(data$Total[i])
}
data[4,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[4])
data[i,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$Pneumonia =  as.numeric(data$Pneumonia[4])
data[i,]$Pneumonia =  as.numeric(data$Pneumonia[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$Total =  as.numeric(data$Total[4])
data[i,]$Total =  as.numeric(data$Total[i-1]) + as.numeric(data$Total[i])
}
EVI = data[4:187,]
View(data)
View(EVI)
deviant(as.numeric(EVI$Respiratory.Infections), r_a = 14)
EVI[5,]$Date = as.Date(as.numeric(data[5,]$Date), origin="1970-01-01")
View(EVI)
EVI[5,]$Date = as.Date(as.numeric(data[5,]$Date), origin="1970-01-01")
data = draft[1:187,]
View(data)
deviant(draft$Respiratory.Infections, r_a=14)
EVI::evi.graphs(EVI_output, ln=F)
EVI = data[4:,]
EVI = data[4:,]
View(EVI)
View(data)
draft = read.xlsx("Dataset Cases UTH_Official.xlsx", detectDates = TRUE)
View(draft)
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
View(data)
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$Total = miss_uni(1, a = as.numeric(data$Total[i-1]), b = as.numeric(data$Total[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$Total = as.numeric(data$Total[i])
}
data[4,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[4])
data[i,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$Pneumonia =  as.numeric(data$Pneumonia[4])
data[i,]$Pneumonia =  as.numeric(data$Pneumonia[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$Total =  as.numeric(data$Total[4])
data[i,]$Total =  as.numeric(data$Total[i-1]) + as.numeric(data$Total[i])
}
View(data)
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
#data[i,]$Date = as.Date(data[i+1,]$Date) - 1
data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
View(data)
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
View(data)
View(data)
View(draft)
data = draft[1:187,]
View(data)
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
View(data)
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$Total = miss_uni(1, a = as.numeric(data$Total[i-1]), b = as.numeric(data$Total[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$Total = as.numeric(data$Total[i])
}
data[4,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[4])
data[i,]$Respiratory.Infections =  as.numeric(data$Respiratory.Infections[i-1]) + as.numeric(data$Respiratory.Infections[i])
data[4,]$Pneumonia =  as.numeric(data$Pneumonia[4])
data[i,]$Pneumonia =  as.numeric(data$Pneumonia[i-1]) + as.numeric(data$Pneumonia[i])
data[4,]$Total =  as.numeric(data$Total[4])
data[i,]$Total =  as.numeric(data$Total[i-1]) + as.numeric(data$Total[i])
}
View(data)
data = draft[1:187,]
for (i in (seq((nrow(data))*2,4,-1))){
if (i%%2==0){
data[i,] = data[i/2,]
}
else{
data[i,]$Date = as.Date(data[i+1,]$Date) - 1
#data[i,]$Date = as.Date(as.numeric(data[i,]$Date), origin="1970-01-01")
}
}
View(data)
36%%2
for (i in (4:nrow(data))){
if (i%%2 != 0){
data[i,]$Respiratory.Infections = miss_uni(1, a = as.numeric(data$Respiratory.Infections[i-1]), b = as.numeric(data$Respiratory.Infections[i+1]))
data[i,]$Pneumonia = miss_uni(1, a = as.numeric(data$Pneumonia[i-1]), b = as.numeric(data$Pneumonia[i+1]))
data[i,]$Attendance.at.Emergency.Department = miss_uni(1, a = as.numeric(data$Attendance.at.Emergency.Department[i-1]), b = as.numeric(data$Attendance.at.Emergency.Department[i+1]))
data[i,]$Total = miss_uni(1, a = as.numeric(data$Total[i-1]), b = as.numeric(data$Total[i+1]))
}
else{
data[i,]$Respiratory.Infections = as.numeric(data$Respiratory.Infections[i])
data[i,]$Pneumonia = as.numeric(data$Pneumonia[i])
data[i,]$Attendance.at.Emergency.Department = as.numeric(data$Attendance.at.Emergency.Department[i])
data[i,]$Total = as.numeric(data$Total[i])
}
}
View(data)
View(data)
EVI = data[4:374,]
deviant(as.numeric(EVI$Respiratory.Infections), r_a = 14)
EVI::evi.graphs(EVI_output, ln=F)
str(data)
EVI = data[c(1,4:374),]
View(EVI)
as.Date(18905)
as.Date(18905, origin = "1970-01-01")
as.Date("2021-10-02", origin = "1970-01-01")
EVI = data[c(1,4:374),]
deviant(as.numeric(EVI$Respiratory.Infections), r_a = 14)
EVI = data[c(4:374),]
View(EVI)
# Respiratory infections
deviant(as.numeric(EVI$Respiratory.Infections), r_a = 14)
EVI::evi.graphs(EVI_output, ln=F)
write.csv(EVI, file="EVI_data.csv")
getwd(\)
getwd()
a<- read.csv("EVI_data.csv")
View(a)
getwd()
setwd("C:/Users/LefMel/Documents/EVI Uth")
list.files()
library(openxlsx)
draft = read.xlsx("Dataset Cases UTH_Official.xlsx", detectDates = TRUE)
View(draft)
# Packages
library(googledrive)
library(XML)
library(rlist)
#library(RCurl)
#getwd()
setwd("C:/Users/LefMel/Documents/EVI Uth")
temp <- tempfile(tmpdir = getwd(), fileext = ".zip")
dl <- drive_download(
as_id("1gdWDhELYMU0lmCQz3po3Ydb7Eb1gF7j_NCs_xluCXQI"), path = temp, overwrite = TRUE)
out <- unzip(temp, exdir = tempdir())
link = paste("file:///",out[1], sep="")
# Works
tables <- readHTMLTable(link)
tables <- list.clean(tables, fun = is.null, recursive = FALSE)
data = data.frame(tables[1])
data = data[-1,-1]
headers = c("Date",	"Respiratory Infections", "Respiratory Infections_Cum",
"Pneumonia", "Pneumonia_Cum", "Flu", "Flu_Cum",
"Attendance at Emergency Department",
"COVID-19 Cases",	"COVID-19 Cases_Cum",	"Total","Total_Cum")
colnames(data) = headers
n.rows <- unlist(lapply(tables, function(t) dim(t)[1]))
View(data)
data = data[-1,1:12]
library(EVI)
deviant(as.numeric(data$`Respiratory Infections`), r_a = 14)
Res_R_A_14 = EVI_output
EVI::evi.graphs(Res_R_A_14, ln=F)
EVI::evi.graphs(Res_R_A_14, ln=T)
deviant(as.numeric(data$`Attendance at Emergency Department`), r_a = 14)
Att_R_A_14 = EVI_output
EVI::evi.graphs(Att_R_A_14, ln=F)
EVI::evi.graphs(Att_R_A_14, ln=T)
deviant(as.numeric(data$Total), r_a = 14)
Tot_R_A_14 = EVI_output
EVI::evi.graphs(Tot_R_A_14, ln=F)
EVI::evi.graphs(Tot_R_A_14, ln=T)
deviant(as.numeric(data$`COVID-19 Cases`[62:215]), r_a = 14)
deviant(as.numeric(data$`COVID-19 Cases`[62:219]), r_a = 14)
COV_R_A_14 = EVI_output
EVI::evi.graphs(COV_R_A_14, ln=F)
EVI::evi.graphs(COV_R_A_14, ln=T)
?evi.graphs
EVI::evi.graphs(Res_R_A_14, graph = "PPV")
EVI::evi.graphs(Res_R_A_14, graph = "PPV", ln=F)
data$Flu[208]
data$Flu[209]
data$Flu[207]
data$Flu[206]
deviant(as.numeric(data$Flu[206:219]), r_a = 14)
deviant(as.numeric(data$Flu[206:219]), r_a = 7)
deviant(as.numeric(data$Flu[206:219]), r_a = 1)
Pne_R_A_14 = EVI_output
deviant(as.numeric(data$Pneumonia), r_a = 14)
Pne_R_A_14 = EVI_output
EVI::evi.graphs(Pne_R_A_14, ln=F)
EVI::evi.graphs(Pne_R_A_14, ln=T)
